---
layout:     post
title:      "HTTP协议简单总结"
date:       2017-10-04 19:51:00
author:     "xutaotao"
header-img: "img/home-bg-o.jpg"
tags:
    - HTTP
---

**1.http协议的主要特点**

1）简单快速：每个资源都是固定的，统一资源符。

2）灵活：HTTP协议头部分都有数据类型，通过一个HTTP协议完成不同数据类型的传输。

3）无连接：连接一次就会断掉。

4）无状态：单从HTTP协议是无法知道两次连接为同一身份。

**2.HTTP报文的组成部分**

1）请求报文：请求行+请求头+空行+请求体

/*请求行：*/请求行由请求方法字段、URL字段和HTTP协议版本字段3个字段组成，它们用空格分隔。例如，GET /index.html 
HTTP/1.1。

HTTP协议的请求方法有GET、POST、HEAD、PUT、DELETE、OPTIONS、TRACE、CONNECT。这里介绍最常用的GET方法和POST方法。

GET：当客户端要从服务器中读取文档时，使用GET方法。GET方法要求服务器将URL定位的资源放在响应报文的数据部分，回送给客户端。使用GET方法时，请求参数和对应的值附加在URL后面，利用一个问号（“?”）代表URL的结尾与请求参数的开始，传递参数长度受限制。例如，/index.jsp?id=100&op=bind。

POST：当客户端给服务器提供信息较多时可以使用POST方法。POST方法将请求参数封装在HTTP请求数据中，以名称/值的形式出现，可以传输大量数据。

/*请求头部:*/请求头部由关键字/值对组成，每行一对，关键字和值用英文冒号“:”分隔。请求头部通知服务器有关于客户端请求的信息，典型的请求头有：

User-Agent：产生请求的浏览器类型。

Accept：客户端可识别的内容类型列表。

Host：请求的主机名，允许多个域名同处一个IP地址，即虚拟主机。

/*空行:*/最后一个请求头之后是一个空行，发送回车符和换行符，通知服务器以下不再有请求头。

/*请求数据:*/请求数据不在GET方法中使用，而是在POST方法中使用。POST方法适用于需要客户填写表单的场合。与请求数据相关的最常使用的请求头是Content-Type和Content-Length。

2）响应报文：状态行+响应头+空行+响应体

**3.HTTP请求报文的一些方法**

OPTION:请求一些选项的信息

GET:请求读取由URL所标志的信息

HEAD:请求读取由URL所标志的信息的首部

POST:给服务器添加信息

PUT：在指明的URL下存储一个文档

DELETE:删除指明的URL所标志的资源

TRACE:用来进行环回测试的请求报文

CONNECT：用于代理服务器

**4.POST和GET的区别**

/*1）GET在浏览器回退时是无害的，而POST会再次提交请求。*/

2）GET产生的URL地址可以被收藏，而POST不可以。

/*3）GET请求会被浏览器主动缓存，而POST不会，除非手动设置。*/

4）GET请求只能进行url编码，而POST支持多种编码方式。

/*5）GET请求参数会被完整保留在浏览器历史记录里，而POST的参数不会被保留。*/

/*6）GET请求在URL中传送的参数是有长度限制的，而POST没有限制。*/

7）GET比POST更不安全，因为参数直接暴露在URL上，所以不能用来传递敏感信息。

/*8）GET参数通过URL传递，POST放在Request body中。*/

9）对参数的数据类型，GET只接受ASCII字符，而POST没有限制。

**5.HTTP状态码**

1xx：指示信息——表示请求已接收，继续处理

2xx：成功——表示请求已被成功接收

3xx：重定向——要完成请求必须进行更进一步的操作

4xx：客户端错误——请求有语法错误或请求无法实现

5xx：服务器错误——服务器未能实现合法的请求

常见状态码：

200 OK：客户端请求成功

206 Partical Content：客户发送了一个带有Range头的GET请求，服务器完成了它。

301 Moved Permanently：所请求的页面已经/*临时*/转移至新的url

304 Not Modified:客户端有缓冲的文档并发出了一个条件性的请求，服务器告诉客户，原有缓冲的文档还可以继续使用。

400 Bad Request:客户端请求有语法错误，不能被服务器所理解

401 Unauthorized：请求未经授权，这个状态码必须和www_authenticate报文域一起使用

403 Forbidden:对被请求页面的访问被禁止

404 Not Found:请求资源不存在

500 Internal Server Error:服务器发生不可预期的错误原来缓冲的文档还可以继续使用

503 Server Unavaliable:请求未完成，服务器临时过载或当机，一段时间后可能恢复正常

**6.持久连接**

HTTP/1.1版本支持，HTTP协议采用"请求——应答"模式，当使用普通模式，即非Keep-Alive模式时，每个请求/应答客户和服务器都要新建一个连接，完成之后立即断开连接（HTTP协议为无连接的协议）

当使用Keep-Alive模式（又称持久连接，连接重用）时，Keep-Alive功能使客户端到服务器端的连接持续有效，当出现对服务器的后续请求时，Keep-Alive功能避免了建立或者重新建立连接。

**7.管线化**

在使用持久连接的情况下，某个连接上消息的传递类似于

请求1——>响应1——>请求2——>响应2——>请求3——>响应3

某个连接上的消息变成类似这样

请求1——>请求2——>请求3——>响应1——>响应2——>响应3

管线化的特点：

1）管线化机制通过持久连接完成，仅HTTP/1.1支持此技术

2）只有GET和HEAD请求可以进行管道化，而POST则有所限制

3）初次创建连接时不应启动管线机制，因为对方（服务器）不一定支持HTTP/1.1版本的协议

4）管线化不会影响响应到来的顺序，如上面的例子所示，响应返回的顺序并未改变

5）HTTP/1.1要求服务器端支持管线化，但并不要求服务器端也对响应进行管线化处理，只是要求对管线化的请求不失败即可

6）由于上面提到的服务端问题，开启管线化很可能并不会带来大幅度的性能提升，而且很多服务器端和代理程序对管线化的支持并不好，因此现代浏览器Chrome和Firefox默认并未开启管线化支持。